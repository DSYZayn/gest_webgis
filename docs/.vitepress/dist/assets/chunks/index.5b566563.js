import{d as O,h as K,g as y,j as R,o as m,b as E,w as S,a3 as M,k as C,n as v,l as a,N as P,I as J,e as N,t as A,r as Q,c as z,F as X,a4 as x,Z as Y,H as Z,T as ee,a5 as B,a6 as te,a7 as F}from"./framework.0ef9fb42.js";import{u as oe,a as ne,i as se}from"./index.aba9eb53.js";import{b as ie,i as ae,d as _,u as le,T as $,a as U,_ as re,C as ce,c as V,w as ue}from"./index.02feb12e.js";const I={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},j=["success","info","warning","error"],fe=ie({customClass:{type:String,default:""},dangerouslyUseHTMLString:{type:Boolean,default:!1},duration:{type:Number,default:4500},icon:{type:ae},id:{type:String,default:""},message:{type:_([String,Object]),default:""},offset:{type:Number,default:0},onClick:{type:_(Function),default:()=>{}},onClose:{type:_(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...j,""],default:""},zIndex:Number}),pe={destroy:()=>!0},de=["id"],me=["textContent"],ve={key:0},ge=["innerHTML"],ye=O({name:"ElNotification"}),Ce=O({...ye,props:fe,emits:pe,setup(t,{expose:s}){const o=t,{ns:n,zIndex:r}=le("notification"),{nextZIndex:f,currentZIndex:p}=r,{Close:c}=ce,l=K(!1);let i;const u=y(()=>{const e=o.type;return e&&$[o.type]?n.m(e):""}),d=y(()=>o.type&&$[o.type]||o.icon),T=y(()=>o.position.endsWith("right")?"right":"left"),q=y(()=>o.position.startsWith("top")?"top":"bottom"),G=y(()=>{var e;return{[q.value]:`${o.offset}px`,zIndex:(e=o.zIndex)!=null?e:p.value}});function k(){o.duration>0&&({stop:i}=ne(()=>{l.value&&h()},o.duration))}function H(){i==null||i()}function h(){l.value=!1}function W({code:e}){e===I.delete||e===I.backspace?H():e===I.esc?l.value&&h():k()}return R(()=>{k(),f(),l.value=!0}),oe(document,"keydown",W),s({visible:l,close:h}),(e,b)=>(m(),E(ee,{name:a(n).b("fade"),onBeforeLeave:e.onClose,onAfterLeave:b[1]||(b[1]=L=>e.$emit("destroy")),persisted:""},{default:S(()=>[M(C("div",{id:e.id,class:v([a(n).b(),e.customClass,a(T)]),style:P(a(G)),role:"alert",onMouseenter:H,onMouseleave:k,onClick:b[0]||(b[0]=(...L)=>e.onClick&&e.onClick(...L))},[a(d)?(m(),E(a(U),{key:0,class:v([a(n).e("icon"),a(u)])},{default:S(()=>[(m(),E(J(a(d))))]),_:1},8,["class"])):N("v-if",!0),C("div",{class:v(a(n).e("group"))},[C("h2",{class:v(a(n).e("title")),textContent:A(e.title)},null,10,me),M(C("div",{class:v(a(n).e("content")),style:P(e.title?void 0:{margin:0})},[Q(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(m(),z(X,{key:1},[N(" Caution here, message could've been compromised, never use user's input as message "),C("p",{innerHTML:e.message},null,8,ge)],2112)):(m(),z("p",ve,A(e.message),1))])],6),[[x,e.message]]),e.showClose?(m(),E(a(U),{key:0,class:v(a(n).e("closeBtn")),onClick:Y(h,["stop"])},{default:S(()=>[Z(a(c))]),_:1},8,["class","onClick"])):N("v-if",!0)],2)],46,de),[[x,l.value]])]),_:3},8,["name","onBeforeLeave"]))}});var he=re(Ce,[["__file","/home/runner/work/element-plus/element-plus/packages/components/notification/src/notification.vue"]]);const w={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},D=16;let be=1;const g=function(t={},s=null){if(!se)return{close:()=>{}};(typeof t=="string"||B(t))&&(t={message:t});const o=t.position||"top-right";let n=t.offset||0;w[o].forEach(({vm:u})=>{var d;n+=(((d=u.el)==null?void 0:d.offsetHeight)||0)+D}),n+=D;const r=`notification_${be++}`,f=t.onClose,p={...t,offset:n,id:r,onClose:()=>{Ee(r,o,f)}};let c=document.body;V(t.appendTo)?c=t.appendTo:te(t.appendTo)&&(c=document.querySelector(t.appendTo)),V(c)||(c=document.body);const l=document.createElement("div"),i=Z(he,p,B(p.message)?{default:()=>p.message}:null);return i.appContext=s??g._context,i.props.onDestroy=()=>{F(null,l)},F(i,l),w[o].push({vm:i}),c.appendChild(l.firstElementChild),{close:()=>{i.component.exposed.visible.value=!1}}};j.forEach(t=>{g[t]=(s={})=>((typeof s=="string"||B(s))&&(s={message:s}),g({...s,type:t}))});function Ee(t,s,o){const n=w[s],r=n.findIndex(({vm:i})=>{var u;return((u=i.component)==null?void 0:u.props.id)===t});if(r===-1)return;const{vm:f}=n[r];if(!f)return;o==null||o(f);const p=f.el.offsetHeight,c=s.split("-")[0];n.splice(r,1);const l=n.length;if(!(l<1))for(let i=r;i<l;i++){const{el:u,component:d}=n[i].vm,T=Number.parseInt(u.style[c],10)-p-D;d.props.offset=T}}function we(){for(const t of Object.values(w))t.forEach(({vm:s})=>{s.component.exposed.visible.value=!1})}g.closeAll=we;g._context=null;const Ne=ue(g,"$notify");export{Ne as E};
