import{l as E}from"./leaflet-src._SlVFspr.js";import{E as R}from"./index.yBuhb7QG.js";import{E as v}from"./index.Oaf9hqQw.js";import{d as S,h as m,j as b,o as I,c as L,a as f,t as g,I as c,m as s,k as i,w as T,e as w}from"./framework.uae2PiAn.js";import"./commonjsHelpers.4gQjN7DL.js";import"./index.0rpYK7zG.js";import"./get.EGpIXTsI.js";import"./memoize.ktP4ZuZa.js";function M(u,e,l){if(u===void 0)throw new Error("请输入天地图开发者密钥！");const a=e.split("_")[0],r=e.split("_")[1],n=l.split("_")[0],d=l.split("_")[1],p=new E.TileLayer("https://{s}.tianditu.gov.cn/"+l+"/wmts?f=pbf&SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER="+n+"&STYLE=default&TILEMATRIXSET="+d+"&FORMAT=tiles&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&tk="+u,{subdomains:["t0","t1","t2","t3","t4","t5","t6","t7"]});return[new E.TileLayer("https://{s}.tianditu.gov.cn/"+e+"/wmts?f=pbf&SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER="+a+"&STYLE=default&TILEMATRIXSET="+r+"&FORMAT=tiles&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}&tk="+u,{subdomains:["t0","t1","t2","t3","t4","t5","t6","t7"]}),p]}var y={VITE_TIANDITU_KEY:"4267820f43926eaf808d61dc07269beb",BASE_URL:"/gest_webgis/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const h={class:"relative w-full h-full"},C={key:0,class:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-full"},V=i("br",null,null,-1),x=i("br",null,null,-1),A=i("br",null,null,-1),O={class:"buttons flex flex-row gap-2"},k=i("div",{id:"map",class:"w-[98%] h-[98%] left-[1%] top-[1%] focus-visible:outline-none z-0"},null,-1),$=S({__name:"HomeMap",setup(u){const e=m(!1),l=m(!0),a=m(""),r=m("请前往天地图官网获取");function n(p){try{e.value=!1,l.value=!0;const[t,o]=M(p,"vec_w","cva_w");fetch(t.getTileUrl(new E.Point(429,183))).then(_=>{new E.Map("map",{preferCanvas:!0,minZoom:3,maxZoom:18,attributionControl:!1,zoomControl:!0,layers:[t,o],center:[44.817831,123.08026],zoom:9,worldCopyJump:!0}),l.value=!1,e.value=!1}).catch(_=>{console.log(_),e.value=!0})}catch(t){console.log(t),e.value=!0}}b(()=>{n(y.VITE_TXXXNDIT_KEY)});const d="4267820f43926eaf808d61dc07269beb";return(p,t)=>(I(),L("div",h,[l.value?(I(),L("div",C,[f(g(e.value?"未获取到天地图图层， 请输入天地图key!":"加载中...")+" ",1),V,c(s(R),{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=o=>a.value=o),onChange:t[1]||(t[1]=o=>n(a.value)),placeholder:r.value},null,8,["modelValue","placeholder"]),x,A,i("div",O,[c(s(v),{onClick:t[2]||(t[2]=o=>n(a.value)),type:"primary"},{default:T(()=>[f("重新加载")]),_:1}),c(s(v),{onClick:t[3]||(t[3]=o=>n(s(d))),type:"primary",onMouseenter:t[4]||(t[4]=o=>r.value=s(d)),onMouseleave:t[5]||(t[5]=o=>r.value="请前往天地图官网获取")},{default:T(()=>[f("使用临时秘钥")]),_:1}),c(s(v),{type:"primary",tag:"a",href:"http://lbs.tianditu.gov.cn/server/MapService.html",target:"_blank",style:{color:"white","text-decoration":"none"}},{default:T(()=>[f(" 前往天地图官网 ")]),_:1})])])):w("",!0),k]))}});export{$ as default};
