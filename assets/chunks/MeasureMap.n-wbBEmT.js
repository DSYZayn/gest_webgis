import{l as a}from"./leaflet-src._SlVFspr.js";import{M as d,T as P,a as c}from"./namespace.QZiRHU_D.js";import"./leaflet-geoman.min.M9xuB-r6.js";import{d as h,j as _,o as g,c as w}from"./framework.FfYh61A3.js";import"./commonjsHelpers.4gQjN7DL.js";import"./cubic.mOPjq5oI.js";import"./value.Hn_TO6tZ.js";import"./isArray.-udoYP1w.js";import"./bisect.DoBgTFST.js";const f={id:"measure",class:"w-full h-full z-0"},u="https://iserver.supermap.io/iserver/services/map-world/rest/maps/World",z=h({__name:"MeasureMap",setup(y){const p=new d(u);_(()=>{const e=new a.Map("measure",{crs:a.CRS.EPSG4326,center:[0,0],maxZoom:18,zoom:1,attributionControl:!1});new P(u).addTo(e);const s={position:"topright",drawMarker:!0,drawPolygon:!0,drawPolyline:!0,editPolygon:!0,deleteLayer:!0};e.pm.addControls(s),e.pm.setLang("zh"),e.on("pm:create",({shape:t,layer:o})=>{switch(t){case"Line":i(o);break;case"Rectangle":l(o);break;case"Polygon":l(o);break;case"Circle":m(o);break}})});function i(e){const r=e._latlngs,s=new a.Polyline(r),t=new c(s);p.measureDistance(t).then(o=>{const n=o.result;e.bindPopup(`<h3>长度</h3><p>${n.distance}米</p>`).openPopup()}),e.on("pm:edit",({shape:o,layer:n})=>{i(n)})}function l(e){const r=e._latlngs,s=new a.Polygon(r),t=new c(s);p.measureArea(t).then(o=>{const n=o.result;e.bindPopup(`<h3>面积</h3><p>${n.area}平方米</p>`).openPopup()}),e.on("pm:edit",({shape:o,layer:n})=>{l(n)})}function m(e){const r=a.PM.Utils.circleToPolygon(e),s=new c(r);p.measureArea(s).then(t=>{const o=t.result;e.bindPopup(`<h3>面积</h3><p>${o.area}平方米</p>`).openPopup()}),e.on("pm:edit",({shape:t,layer:o})=>{m(o)})}return(e,r)=>(g(),w("div",f))}});export{z as default};
