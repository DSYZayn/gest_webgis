import{l as s}from"./leaflet-src._SlVFspr.js";import{N as g,T as w,D as h,F as E,B as N,S}from"./namespace.QZiRHU_D.js";import{E as c}from"./index.wlq5r9Vu.js";import{E as b}from"./index.stGyGh6m.js";import{E as d}from"./index.-sCuYguS.js";import{d as D,h as T,j as A,o as C,c as F,I as u,w as y,a as v,m as a,F as V,k as x}from"./framework.FfYh61A3.js";import"./commonjsHelpers.4gQjN7DL.js";import"./cubic.mOPjq5oI.js";import"./value.Hn_TO6tZ.js";import"./isArray.-udoYP1w.js";import"./bisect.DoBgTFST.js";import"./get.EGpIXTsI.js";import"./memoize.ktP4ZuZa.js";import"./index.5F6Tb3y8.js";import"./aria.ClGo7ZJR.js";const L=x("div",{id:"buffer",class:"w-full h-full z-0"},null,-1),P="https://iserver.supermap.io/iserver/services/map-changchun/rest/maps/长春市区图",W=D({__name:"BufferMap",setup(_){let o,f=[];const n=T("团结路");A(()=>{const t=new s.Map("buffer",{crs:new g({bounds:new s.Bounds([48.4,-7668.25],[8958.85,-55.58]),origin:new s.Point(48.4,-55.58)}),center:[-3375,5105],maxZoom:18,zoom:6});o=t,new w(P).addTo(t)});function m(t){const e={FLAT:"FLAT",ROUND:"ROUND"},r=new h({dataset:"RoadLine2@Changchun",filterQueryParameter:new E({attributeFilter:"NAME='"+n.value+"'"}),bufferSetting:new N({endType:e.ROUND,leftDistance:{value:10},rightDistance:{value:10},semicircleLineSegment:10})}),i="https://iserver.supermap.io/iserver/services/spatialanalyst-changchun/restjsr/spatialanalyst";new S(i).bufferAnalysis(r).then(function(B){const l=B.result;if(console.log(l),l===void 0){d({title:"提示",type:"error",message:"缓冲区分析失败！"});return}d({title:"提示",type:"success",message:"缓冲区分析成功！"});const p=new s.GeoJSON(l.recordset.features,{style:{color:"red"}}).addTo(t);f.push(p),t.fitBounds(p.getBounds())})}return(t,e)=>(C(),F(V,null,[u(a(c),{type:"primary",onClick:e[0]||(e[0]=r=>m(a(o)))},{default:y(()=>[v("开始")]),_:1}),u(a(c),{type:"primary",onClick:e[1]||(e[1]=r=>a(f).forEach(i=>i.remove()))},{default:y(()=>[v("清除")]),_:1}),u(a(b),{placeholder:"路名",modelValue:n.value,"onUpdate:modelValue":e[2]||(e[2]=r=>n.value=r),onChange:e[3]||(e[3]=r=>m(a(o))),style:{width:"10rem"}},null,8,["modelValue"]),L],64))}});export{W as default};
